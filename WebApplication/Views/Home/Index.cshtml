@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Index";
}


<html>
    <head>
        <meta http-equiv="content-type" content="application/json">
        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.1.1.js"></script>
        <style>
            table {font-family: arial, sans-serif;border-collapse: collapse;width: 100%;}
            td, th {border: 1px solid #dddddd;text-align: left;padding: 8px;}
        </style>
    </head>
    <body>
        <table id="treeList">
            <tr><th>Name</th><th>Full Name</th><th>Extension</th><th>Length</th><th>Creation Time</th></tr>
        </table>

        <script type="text/javascript">
            $(document).ready((function () {
                var _path = '@ViewData["Path"]';
                if(_path == "null")
                {
                    var actionUrl = '@Url.Action("ReturnJsonTree", "Home")';
                    $.getJSON(actionUrl, displayData);
                }
                else
                {
                    var actionUrl = '@Url.Action("ReturnJsonFile", "Home")?path=' + _path;
                    $.getJSON(actionUrl, displayData);
                }
            }));

            function displayData(response) {
                if (response != null) {
                    for (var i = 0; i < response.length; i++) {
                        $("#treeList").append("<tr><td>" + response[i].name + "</td><td>" + response[i].fullName + "</td><td>" + response[i].extension + "</td><td>" + response[i].length + "</td><td>" + response[i].creationTime + "</td></tr>");
                    }
                }
            }
        </script>
        
    </body>
</html>